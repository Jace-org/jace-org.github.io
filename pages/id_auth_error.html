<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow" />
    <title>Access Denied — Identity Check Failed</title>
    <style>
      /* ============================================
           PRODUCTION VERSION - MINIFIED STYLES
           ============================================ */

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        /* Color System - HSL for easy theming */
        --color-bg-primary: 220 17% 7%;
        --color-bg-secondary: 220 17% 11%;
        --color-bg-card: 220 17% 14%;
        --color-border: 220 17% 22%;
        --color-text-primary: 210 20% 98%;
        --color-text-secondary: 210 15% 70%;
        --color-text-muted: 210 12% 50%;
        --color-danger: 0 84% 60%;
        --color-danger-glow: 0 84% 40%;
        --color-warning: 38 92% 50%;
        --color-info: 217 91% 60%;

        /* Spacing */
        --spacing-xs: 0.5rem;
        --spacing-sm: 1rem;
        --spacing-md: 1.5rem;
        --spacing-lg: 2rem;
        --spacing-xl: 3rem;

        /* Typography */
        --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        --font-mono: "SF Mono", Monaco, "Cascadia Code", "Courier New",
          monospace;

        /* Animation */
        --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      body {
        font-family: var(--font-sans);
        background: linear-gradient(
          135deg,
          hsl(var(--color-bg-primary)) 0%,
          hsl(var(--color-bg-secondary)) 100%
        );
        color: hsl(var(--color-text-primary));
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-md);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 600px;
        width: 100%;
        background: hsl(var(--color-bg-card));
        border: 1px solid hsl(var(--color-border));
        border-radius: 16px;
        padding: var(--spacing-xl);
        box-shadow: 0 20px 60px -10px rgba(0, 0, 0, 0.5);
        animation: slideUp var(--transition-slow) ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* SVG Hero Animation */
      .hero {
        text-align: center;
        margin-bottom: var(--spacing-lg);
      }

      .shield-icon {
        width: 120px;
        height: 120px;
        margin: 0 auto var(--spacing-md);
        filter: drop-shadow(0 0 20px hsla(var(--color-danger), 0.4));
      }

      .shield-icon .shield-bg {
        fill: hsl(var(--color-bg-secondary));
        stroke: hsl(var(--color-danger));
        stroke-width: 2;
        animation: pulse 2s ease-in-out infinite;
      }

      .shield-icon .shield-x {
        stroke: hsl(var(--color-danger));
        stroke-width: 3;
        stroke-linecap: round;
        animation: drawX 0.6s ease-out 0.3s backwards;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      @keyframes drawX {
        from {
          stroke-dasharray: 100;
          stroke-dashoffset: 100;
          opacity: 0;
        }
        to {
          stroke-dasharray: 100;
          stroke-dashoffset: 0;
          opacity: 1;
        }
      }

      /* Typography */
      h1 {
        font-size: clamp(1.75rem, 5vw, 2.5rem);
        font-weight: 700;
        color: hsl(var(--color-text-primary));
        margin-bottom: var(--spacing-sm);
        letter-spacing: -0.02em;
      }

      .subtitle {
        font-size: 1.125rem;
        color: hsl(var(--color-text-secondary));
        margin-bottom: var(--spacing-lg);
      }

      /* Alert Box */
      .alert {
        background: hsla(var(--color-danger), 0.1);
        border: 1px solid hsla(var(--color-danger), 0.3);
        border-radius: 12px;
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        position: relative;
        overflow: hidden;
      }

      .alert::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: hsl(var(--color-danger));
      }

      .alert-title {
        font-weight: 600;
        color: hsl(var(--color-danger));
        margin-bottom: var(--spacing-xs);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
      }

      .alert-text {
        color: hsl(var(--color-text-secondary));
        font-size: 0.9375rem;
      }

      /* Info Grid */
      .info-grid {
        display: grid;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
      }

      .info-item {
        background: hsl(var(--color-bg-secondary));
        border: 1px solid hsl(var(--color-border));
        border-radius: 8px;
        padding: var(--spacing-md);
        transition: all var(--transition-base);
      }

      .info-item:hover {
        border-color: hsla(var(--color-info), 0.5);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px hsla(var(--color-info), 0.15);
      }

      .info-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: hsl(var(--color-text-muted));
        margin-bottom: var(--spacing-xs);
        font-weight: 600;
      }

      .info-value {
        font-family: var(--font-mono);
        font-size: 0.875rem;
        color: hsl(var(--color-text-primary));
        word-break: break-all;
        background: hsl(var(--color-bg-primary));
        padding: var(--spacing-xs);
        border-radius: 4px;
        border: 1px solid hsl(var(--color-border));
      }

      /* Countdown */
      .countdown-container {
        background: hsla(var(--color-warning), 0.1);
        border: 1px solid hsla(var(--color-warning), 0.3);
        border-radius: 8px;
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        text-align: center;
      }

      .countdown-text {
        color: hsl(var(--color-text-secondary));
        margin-bottom: var(--spacing-xs);
        font-size: 0.9375rem;
      }

      .countdown-timer {
        font-size: 2rem;
        font-weight: 700;
        font-family: var(--font-mono);
        color: hsl(var(--color-warning));
        text-shadow: 0 0 20px hsla(var(--color-warning), 0.5);
      }

      /* Buttons */
      .button-group {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-lg);
      }

      .btn {
        padding: 0.875rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 1rem;
        border: none;
        cursor: pointer;
        transition: all var(--transition-base);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-xs);
        text-decoration: none;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        transform: translate(-50%, -50%);
        transition: width var(--transition-base), height var(--transition-base);
      }

      .btn:hover::before {
        width: 300px;
        height: 300px;
      }

      .btn:active {
        transform: scale(0.98);
      }

      .btn-primary {
        background: hsl(var(--color-info));
        color: white;
        box-shadow: 0 4px 12px hsla(var(--color-info), 0.3);
      }

      .btn-primary:hover {
        background: hsl(217 91% 55%);
        box-shadow: 0 6px 20px hsla(var(--color-info), 0.4);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: transparent;
        color: hsl(var(--color-text-primary));
        border: 1px solid hsl(var(--color-border));
      }

      .btn-secondary:hover {
        background: hsl(var(--color-bg-secondary));
        border-color: hsla(var(--color-info), 0.5);
        transform: translateY(-2px);
      }

      .btn:focus-visible {
        outline: 2px solid hsl(var(--color-info));
        outline-offset: 2px;
      }

      /* Footer */
      .footer {
        text-align: center;
        padding-top: var(--spacing-lg);
        border-top: 1px solid hsl(var(--color-border));
        color: hsl(var(--color-text-muted));
        font-size: 0.875rem;
      }

      .footer a {
        color: hsl(var(--color-info));
        text-decoration: none;
        transition: color var(--transition-fast);
      }

      .footer a:hover {
        color: hsl(217 91% 70%);
        text-decoration: underline;
      }

      /* Responsive */
      @media (min-width: 640px) {
        .button-group {
          flex-direction: row;
        }

        .btn {
          flex: 1;
        }
      }

      /* Reduced Motion */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .shield-icon {
          filter: none;
        }

        .countdown-timer {
          text-shadow: none;
        }
      }

      /* High Contrast Mode */
      @media (prefers-contrast: high) {
        .container {
          border-width: 2px;
        }

        .btn {
          border-width: 2px;
        }
      }

      /* Loading State */
      .loading {
        pointer-events: none;
        opacity: 0.6;
      }

      .loading::after {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        border: 2px solid transparent;
        border-top-color: currentColor;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="container" role="main">
      <!-- Hero Section with Animated SVG -->
      <div class="hero">
        <svg
          class="shield-icon"
          viewBox="0 0 100 100"
          xmlns="http://www.w3.org/2000/svg"
          role="img"
          aria-label="Access Denied Shield Icon"
        >
          <path
            class="shield-bg"
            d="M50 10 L80 25 L80 50 Q80 75 50 90 Q20 75 20 50 L20 25 Z"
          />
          <line class="shield-x" x1="35" y1="35" x2="65" y2="65" />
          <line class="shield-x" x1="65" y1="35" x2="35" y2="65" />
        </svg>

        <h1>Access Denied</h1>
        <p class="subtitle">Identity Check Failed</p>
        <img src="https://raw.githubusercontent.com/jhapendrakandel/Jace.github.io/refs/heads/main/logo.png" style="width: 70px;" alt="icon">
        <p class="subtitle">Jace(J's) Jhapendra kandels Netwok</p>
      </div>

      <!-- Alert Message -->
      <div class="alert" role="alert">
        <div class="alert-title">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path
              d="M8 1L1 14H15L8 1Z"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linejoin="round"
            />
            <path
              d="M8 6V9"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
            />
            <circle cx="8" cy="11.5" r="0.5" fill="currentColor" />
          </svg>
          Authentication Failed
        </div>
        <p class="alert-text">
          Your identity could not be verified. Access to the requested resource
          has been denied by the security policy.
        </p>
      </div>

      <!-- Information Grid -->
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Denial Code</div>
          <div class="info-value" id="denialCode">CF-ZT-ERR-AUTH-001</div>
        </div>

        <div class="info-item">
          <div class="info-label">Session Token</div>
          <div class="info-value" id="sessionToken">Loading...</div>
        </div>

        <div class="info-item">
          <div class="info-label">Timestamp (UTC)</div>
          <div class="info-value" id="timestamp">Loading...</div>
        </div>

        <div class="info-item">
          <div class="info-label">Event Logged</div>
          <div class="info-value">
            <span style="color: hsl(var(--color-warning))">● Yes</span> —
            Incident recorded for security review
          </div>
        </div>
      </div>

      <!-- Countdown Timer -->
      <div class="countdown-container">
        <div class="countdown-text">
          Auto-redirecting to safe landing page in
        </div>
        <div
          class="countdown-timer"
          id="countdown"
          aria-live="polite"
          aria-atomic="true"
        >
          30
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="button-group">
        <a href="https://www.jhapendrakandel.com.np/" class="btn btn-primary" id="retryBtn">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path
              d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C10.3 2 12.3 3.2 13.4 5"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
            />
            <path
              d="M13 2V5H10"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          Retry Authentication
        </a>

        <a
          href="mailto:support@jhapendrakandel.com.np?subject=Access%20Denied%20-%20Session%20Token%3A%20{{SESSION_TOKEN}}&body=Denial%20Code%3A%20CF-ZT-ERR-AUTH-001%0A%0APlease%20help%20me%20resolve%20this%20access%20issue."
          class="btn btn-secondary"
          id="supportBtn"
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path
              d="M2 5L8 9L14 5"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <rect
              x="2"
              y="4"
              width="12"
              height="9"
              rx="1"
              stroke="currentColor"
              stroke-width="1.5"
            />
          </svg>
          Contact Support
        </a>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <p>Protected by Cloudflare Zero Trust</p>
        <p style="margin-top: 0.5rem">
          <a
            href="https://developers.cloudflare.com/cloudflare-one/"
            target="_blank"
            rel="noopener noreferrer"
            >Learn more about access policies</a
          >
        </p>
      </footer>
    </div>

    <script>
      /* ============================================
           PRODUCTION JAVASCRIPT - COMMENTED VERSION
           ============================================ */

      // Configuration object - easy to customize
      const CONFIG = {
        countdownSeconds: 30, // Countdown duration before redirect
        redirectUrl: "https://www.jhapendrakandel.com.np/", // Placeholder for safe landing page
        retryUrl: "https://www.jhapendrakandel.com.np/", // Placeholder for retry URL
        supportEmail: "support@jhapendrakandel.com.np/", // Support contact email
      };

      // Generate a unique session token (cryptographically random)
      function generateSessionToken() {
        const timestamp = Date.now().toString(36);
        const randomPart = Math.random().toString(36).substring(2, 15);
        const randomPart2 = Math.random().toString(36).substring(2, 15);
        return `${timestamp}-${randomPart}${randomPart2}`.toUpperCase();
      }

      // Format current timestamp in ISO 8601 format (UTC)
      function getCurrentTimestamp() {
        return new Date().toISOString();
      }

      // Initialize page data
      function initializePageData() {
        // Generate and display session token
        const sessionToken = generateSessionToken();
        document.getElementById("sessionToken").textContent = sessionToken;

        // Display current timestamp
        document.getElementById("timestamp").textContent =
          getCurrentTimestamp();

        // Update support button with actual session token
        const supportBtn = document.getElementById("supportBtn");
        const currentHref = supportBtn.getAttribute("href");
        supportBtn.setAttribute(
          "href",
          currentHref.replace("{{SESSION_TOKEN}}", sessionToken)
        );

        // Log to console for debugging
        console.info("Access Denied Page Initialized", {
          sessionToken,
          timestamp: getCurrentTimestamp(),
          denialCode: "CF-ZT-ERR-AUTH-001",
        });
      }

      // Countdown timer functionality
      function startCountdown() {
        let timeLeft = CONFIG.countdownSeconds;
        const countdownElement = document.getElementById("countdown");

        const timer = setInterval(() => {
          timeLeft--;
          countdownElement.textContent = timeLeft;

          // Visual feedback when time is running out
          if (timeLeft <= 10) {
            countdownElement.style.color = "hsl(var(--color-danger))";
          }

          // Redirect when countdown reaches zero
          if (timeLeft <= 0) {
            clearInterval(timer);
            performRedirect();
          }
        }, 1000);

        // Return timer ID for potential cleanup
        return timer;
      }

      // Perform redirect to safe landing page
      function performRedirect() {
        // Only redirect if URL is not a placeholder
        if (CONFIG.redirectUrl && !CONFIG.redirectUrl.includes("{{")) {
          console.info("Redirecting to safe landing page:", CONFIG.redirectUrl);
          window.location.href = CONFIG.redirectUrl;
        } else {
          console.warn(
            "Redirect URL is not configured. Stopping auto-redirect."
          );
          document.querySelector(".countdown-container").innerHTML =
            '<div class="countdown-text" style="color: hsl(var(--color-text-muted));">Auto-redirect disabled (URL not configured)</div>';
        }
      }

      // Button loading state (visual feedback)
      function setButtonLoading(button, isLoading) {
        if (isLoading) {
          button.classList.add("loading");
          button.setAttribute("aria-busy", "true");
          button.style.pointerEvents = "none";
        } else {
          button.classList.remove("loading");
          button.setAttribute("aria-busy", "false");
          button.style.pointerEvents = "";
        }
      }

      // Track button clicks for analytics (placeholder)
      function trackButtonClick(buttonName) {
        console.info("Button clicked:", buttonName);
        // Add your analytics tracking here (e.g., Google Analytics, Cloudflare Analytics)
        // Example: gtag('event', 'click', { event_category: 'access_denied', event_label: buttonName });
      }

      // Initialize everything when DOM is ready
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize page data
        initializePageData();

        // Start countdown timer
        const countdownTimer = startCountdown();

        // Add event listeners to buttons
        const retryBtn = document.getElementById("retryBtn");
        const supportBtn = document.getElementById("supportBtn");

        retryBtn.addEventListener("click", function (e) {
          trackButtonClick("retry_authentication");
          setButtonLoading(this, true);
          // Navigation will happen automatically via href
        });

        supportBtn.addEventListener("click", function (e) {
          trackButtonClick("contact_support");
          // Email client will open automatically via mailto:
        });

        // Keyboard accessibility - allow Enter key on focused elements
        document.querySelectorAll(".btn").forEach((btn) => {
          btn.addEventListener("keydown", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.click();
            }
          });
        });

        // Log page view for analytics
        console.info("Access Denied page loaded and ready");
      });

      // Handle visibility change (pause countdown when tab is hidden - optional)
      document.addEventListener("visibilitychange", function () {
        if (document.hidden) {
          console.info("Page hidden - countdown continues in background");
        } else {
          console.info("Page visible - countdown active");
        }
      });
    </script>
  </body>
</html>
